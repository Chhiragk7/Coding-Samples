$(function(){var t=function(){var t={top:20,right:0,bottom:50,left:20},e=960-t.left-t.right,a=480-t.top-t.bottom,r=Math.floor(e/24),n=2*r,i=9,o=["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],l=["Mo","Tu","We","Th","Fr","Sa","Su"],d=["1a","2a","3a","4a","5a","6a","7a","8a","9a","10a","11a","12a","1p","2p","3p","4p","5p","6p","7p","8p","9p","10p","11p","12p"];datasets=["hourmap-1.tsv"];var u=d3.select("#day-hour-heat-map").append("svg").attr("id","dayhour-responsive").attr("viewBox","0 0 960 500").attr("preserveAspectRatio","xMidYMid").attr("width",e+t.left+t.right).attr("height",a+t.top+t.bottom).append("g").attr("transform","translate("+t.left+","+t.top+")"),s=(u.selectAll(".dayLabel").data(l).enter().append("text").text(function(t){return t}).attr("x",0).attr("y",function(t,e){return e*r}).style("text-anchor","end").attr("transform","translate(-6,"+r/1.5+")").attr("class",function(t,e){return e>=0&&4>=e?"dayLabel mono axis axis-workweek":"dayLabel mono axis"}),u.selectAll(".timeLabel").data(d).enter().append("text").text(function(t){return t}).attr("x",function(t,e){return e*r}).attr("y",0).style("text-anchor","middle").attr("transform","translate("+r/2+", -6)").attr("class",function(t,e){return e>=7&&16>=e?"timeLabel mono axis axis-worktime":"timeLabel mono axis"}),function(t){d3.tsv(t,function(t){return{day:+t.day,hour:+t.hour,value:+t.value}},function(t,e){var l=d3.scale.quantile().domain([0,i-1,d3.max(e,function(t){return t.value})]).range(o),d=u.selectAll(".hour").data(e,function(t){return t.day+":"+t.hour});d.append("title"),d.enter().append("rect").attr("x",function(t){return(t.hour-1)*r}).attr("y",function(t){return(t.day-1)*r}).attr("rx",4).attr("ry",4).attr("class","hour bordered").attr("width",r).attr("height",r).style("fill",o[0]),d.transition().duration(1e3).style("fill",function(t){return l(t.value)}),d.select("title").text(function(t){return t.value}),d.exit().remove();var s=u.selectAll(".legend").data([0].concat(l.quantiles()),function(t){return t});s.enter().append("g").attr("class","legend"),s.append("rect").attr("x",function(t,e){return n*e}).attr("y",a).attr("width",n).attr("height",r/2).style("fill",function(t,e){return o[e]}),s.append("text").attr("class","mono").text(function(t){return"â‰¥ "+Math.round(t)}).attr("x",function(t,e){return n*e}).attr("y",a+r),s.exit().remove()})});s(datasets[0])},e=function(){function t(t){function e(t,r){r.children?r.children.forEach(function(t){e(r.name,t)}):a.push({packageName:t,className:r.name,value:r.size})}var a=[];return e(null,t),{children:a}}var e=800,a=d3.format(",d"),r=d3.scale.category20c(),n=d3.layout.pack().sort(null).size([e,e]).padding(1.5),i=750,o=550,l=d3.select("#bubble-chart").append("svg").attr("id","bubble-chart-responsive").attr("viewBox","0 0 800 800").attr("preserveAspectRatio","xMidYMid").attr("width",i).attr("height",o).attr("class","bubble");d3.json("flare.json",function(e,i){if(e)throw e;var o=l.selectAll(".node").data(n.nodes(t(i)).filter(function(t){return!t.children})).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"});o.append("title").text(function(t){return t.className+": "+a(t.value)}),o.append("circle").attr("r",function(t){return t.r}).style("fill",function(t){return r(t.packageName)}),o.append("text").attr("dy",".3em").style("text-anchor","middle").text(function(t){return t.className.substring(0,t.r/3)})}),d3.select(self.frameElement).style("height",e+"px")};t(),e();var a=1.92,r=750/550,n=750/550,i=$("#dayhour-responsive"),o=$("#bubble-chart-responsive"),l=$("#word-cloud-responsive"),d=i.parent().width(),u=o.parent().width(),s=l.parent().width();i.attr("width",d),o.attr("width",u),l.attr("width",s),i.attr("height",d/a),o.attr("height",u/r),l.attr("height",s/n),$(window).on("resize",function(){d=i.parent().width(),u=o.parent().width(),s=l.parent().width(),i.attr("width",d),o.attr("width",u),l.attr("width",s),i.attr("height",d/a),o.attr("height",u/r),l.attr("height",s/n)})});